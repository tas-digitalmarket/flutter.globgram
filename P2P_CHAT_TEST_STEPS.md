# راهنمای تست چت P2P Globgram

## مراحل تست پیام‌رسانی بین دو کاربر

### مرحله 1: اجرای اپلیکیشن
```bash
cd "d:\برنامه نویسی\globgramflutter"
flutter run -d web-server --web-hostname 0.0.0.0 --web-port 8082
```

### مرحله 2: باز کردن دو تب مرورگر
1. تب اول: `http://localhost:8082`
2. تب دوم: `http://localhost:8082`

### مرحله 3: ایجاد اتاق (کاربر اول)
1. در تب اول روی دکمه **"Create Room"** کلیک کنید
2. یک Room ID (مثل "ABC123") نمایش داده خواهد شد
3. این کد را یادداشت کنید
4. روی دکمه **"Copy ID"** کلیک کنید تا کپی شود
5. روی دکمه **"Join Room"** کلیک کنید

### مرحله 4: پیوستن به اتاق (کاربر دوم)
1. در تب دوم، Room ID را در فیلد متنی وارد کنید
2. روی دکمه **"Join Room"** کلیک کنید

### مرحله 5: تست ارسال پیام
1. در هر یک از تب‌ها پیامی تایپ کنید
2. Enter بزنید یا روی دکمه ارسال کلیک کنید
3. **انتظار**: پیام باید در تب دیگر نمایش داده شود

## نکات مهم

### لاگ‌ها و عیب‌یابی
- F12 بزنید و Console را باز کنید
- لاگ‌های اتصال و ارسال پیام را مشاهده کنید
- در صفحه چت روی دکمه "View Logs" کلیک کنید

### رفع مشکلات رایج

#### مشکل: پیام به خود کاربر برمی‌گردد
- **علت**: سیستم P2P درست کانفیگ نشده
- **راه‌حل**: اطمینان حاصل کنید که دو تب مختلف استفاده می‌کنید

#### مشکل: Room ID نمایش داده نمی‌شود
- **علت**: خطا در ایجاد اتاق
- **راه‌حل**: صفحه را refresh کنید و دوباره تلاش کنید

#### مشکل: پیام‌ها ارسال نمی‌شوند
- **علت**: اتصال P2P برقرار نشده
- **راه‌حل**: 
  1. اطمینان حاصل کنید که هر دو تب همان Room ID را دارند
  2. لاگ‌ها را بررسی کنید
  3. دکمه "Test Connection" را امتحان کنید

## وضعیت‌های اتصال

- **Connecting**: در حال اتصال
- **Connected**: اتصال برقرار
- **Disconnected**: اتصال قطع

## تست موفقیت‌آمیز

اگر مراحل بالا را درست دنبال کرده‌اید:
1. هر دو تب باید همان Room ID را نشان دهند
2. Peer ID هر تب باید متفاوت باشد
3. پیام‌هایی که در یک تب ارسال می‌کنید باید در تب دیگر ظاهر شوند
4. پیام‌ها نباید در تب فرستنده تکرار شوند

## آموزش اشتراک‌گذاری Room ID

- کپی کردن: روی دکمه "Copy ID" کلیک کنید
- اشتراک‌گذاری: Room ID را در پیام یا ایمیل ارسال کنید
- QR Code: کد QR ایجاد شده را اسکن کنید

---

**نکته**: این اپلیکیشن برای تست در محیط محلی طراحی شده است. برای استفاده واقعی، سرور signaling مناسب نیاز است.
